{% extends 'cruds/base.html' %}
{% load i18n %}
{% load crud_tags %}
{% load personnel_utils %}
{% load static %}
{% block title %}User Manager{% endblock %}

{% block page_name %}User Manager{% endblock %}
{% block page_description %}Profile{% endblock %}

{% block bodyclass %}skin-blue {%if config.hide_sidebar %}sidebar-collapse{%endif%} {% endblock %}

{% block page_stylesheets %}
<!-- ChartJS 1.0.1 -->
<script src="{% static 'plugins/chartjs/Chart.min.js' %}"></script>
{% endblock %}

{% block content %}
  <div class="row">
    <div class="col-md-3">
      <!-- Profile Image -->
      <div class="box box-primary">
        <div class="box-body box-profile">
          <img class="profile-user-img img-responsive img-circle" src="{{ object.profile_picture.url }}" alt="FotoÄŸraf">

          <h3 class="profile-username text-center">{{ object }}</h3>

          <p class="text-muted text-center">{{ object.job }}</p>
          {% if request.user.is_authenticated %}
          <ul class="list-group list-group-unbordered">
            <li class="list-group-item">
              <b>Work days</b> <a class="pull-right">{{ object.total_workday }}</a>
            </li>
            <li class="list-group-item">
              <b>Work hours</b> <a class="pull-right">{{ object.total_workhour }}</a>
            </li>
            <li class="list-group-item">
              <b>Total dose</b> <a class="pull-right">{{ object.total_dose }}</a>
            </li>



          </ul>
          <div class="col-md-12 col-lg-12 " align="center">
          <a href="/personnel/personnel/{{object.id}}/update" class="btn btn-primary" align="center">Update Details</a>
          {% get_folder object.id as folder%}
          <a href="/admin/filer/folder/{{folder.id}}/list/" class="btn btn-warning" align="center">User Files</a>
            </div>
          {%endif%}
        </div>
        <!-- /.box-body -->
      </div>
      <!-- /.box -->

      <!-- About Me Box -->
      <div class="box box-primary">
        <div class="box-header with-border">
          <h3 class="box-title">About</h3>
        </div>
        <!-- /.box-header -->
        <div class="box-body">
          <strong><i class="fa fa-book margin-r-5"></i>Contact</strong>

          <p class="text-muted">
            E-mail: <b><a href="mailto:{{ object.email }}">{{ object.email }}</a> </b><br>
            Job-phone: <b><a href="tel:{{ object.phone_number1 }}">{{ object.phone_number1 }}</a> </b><br>
            {% if request.user.is_authenticated %}
            Mobile-Phone: <b><a href="tel:{{ object.phone_number2 }}">{{ object.phone_number2 }}</a></b>
            {%endif%}
          </p>

          <hr>

          <strong><i class="fa fa-map-marker margin-r-5"></i>Department</strong>

          <p class="text-muted">{{ object.department }}</p>
          {% if request.user.is_authenticated %}
          <hr>

          <strong><i class="fa fa-file-text-o margin-r-5"></i> Notes</strong>

          <p>{{ object.notes }}</p>
          {%endif%}
        </div>
        <!-- /.box-body -->
      </div>
      <!-- /.box -->
    </div>
    <!-- /.col -->
    <div class="col-md-9">
      <div class="nav-tabs-custom">
        <ul class="nav nav-tabs">
          {% if request.user.is_authenticated %}
          <li class="active"><a href="#about" data-toggle="tab">Personel</a></li>
          <li class=""><a href="#contact" data-toggle="tab">Contact</a></li>
          <li class=""><a href="#job" data-toggle="tab">Job</a></li>
          <li class=""><a href="#files" data-toggle="tab">Files</a></li>
          <li class=""><a href="#cv" data-toggle="tab">CV</a></li>
          {%else%}
          <li class="active"><a href="#cv" data-toggle="tab">CV</a></li>
          {%endif%}

        </ul>
        <div class="tab-content">
          {% if request.user.is_authenticated %}
          <div class="active tab-pane" id="about">
            <div class="box-body">
              <div class="row">

                <div class=" col-md-6 col-lg-6 ">
                  <table class="table table-user-information">
                    <tbody>
                      <tr>
                        <td>Name :</td>
                        <td><b>{{object.name}}</b></td>
                      </tr>
                      <tr>
                        <td>Surname :</td>
                        <td><b>{{object.surname}}</b></td>
                      </tr>
                      <tr>
                        <td>Nat ID :</td>
                        <td><b>{{object.nat_id}}</b></td>
                      </tr>
                      <tr>
                        <td>Country :</td>
                        <td><b>{{object.get_country_display}}</b></td>
                      </tr>
                      <tr>
                        <td>User Type :</td>
                        <td><b>{{object.personnel_type}}</b></td>
                      </tr>
                      <tr>
                        <td>Gender :</td>
                        <td><b>{{object.get_gender_display}}</b></td>
                      </tr>
                      <tr>
                        <td>Birth date :</td>
                        <td><b>{{object.birth_date}}</b></td>
                      </tr>
                      <tr>
                        <td>Marital Status:</td>
                        <td><b>{{object.get_marital_status_display}}</b></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              </div>
          </div>
          <div class="tab-pane" id="contact">
            <div class="box-body">
              <div class="row">

                <div class=" col-md-6 col-lg-6 ">
                  <table class="table table-user-information">
                    <tbody>
                      <tr>
                        <td>Job Phone :</td>
                        <td><b>{{object.phone_number1}}</b></td>
                      </tr>
                      <tr>
                        <td>Mobile Phone :</td>
                        <td><b>{{object.phone_number2}}</b></td>
                      </tr>
                      <tr>
                        <td>E-mail :</td>
                        <td><b>{{object.email}}</b></td>
                      </tr>
                      <tr>
                        <td>Address :</td>
                        <td><b>{{object.address}}</b></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <!-- /.tab-pane -->
          <div class="tab-pane" id="job">
            <!-- The timeline -->
            <!-- BAR CHART -->
              <div class="box-body">
                <div class="row">

                  <div class=" col-md-6 col-lg-6 ">
                    <table class="table table-user-information">
                      <tbody>
                        <tr>
                          <td>Department :</td>
                          <td><b>{{object.department}}</b></td>
                        </tr>
                        <tr>
                          <td>Job :</td>
                          <td><b>{{object.job}}</b></td>
                        </tr>
                        <tr>
                          <td>Title :</td>
                          <td><b>{{object.title}}</b></td>
                        </tr>
                        <tr>
                          <td>Drive Licence :</td>
                          <td><b>{{object.get_drive_licence_display}}</b></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <!-- /.box-body -->


          </div>
          <!-- /.tab-pane -->
          <div class="tab-pane" id="files">
            <!-- The timeline -->
            <!-- BAR CHART -->
              <div class="box-body">
                <div class="row">

                  <div class=" col-md-6 col-lg-6 ">
                    <table class="table table-user-information">
                      <tbody>
                        <tr>
                          <td>Personel PDF :</td>
                          <td><a href="/media/{{personnel.user_file}}"><b>{{personnel.user_file}}</b></a></td>
                        </tr>
                        <tr>
                          <td>Health Status :</td>
                          <td><a href="/media/{{personnel.health_status}}"><b>{{personnel.health_status}}</b></a></td>
                        </tr>
                        <tr>
                          <td>Extra file 1 :</td>
                          <td><a href="/media/{{personnel.extra_file1}}"><b>{{personnel.extra_file1}}</b></a></td>
                        </tr>
                        <tr>
                          <td>Extra file 2 :</td>
                          <td><a href="/media/{{personnel.extra_file2}}"><b>{{personnel.extra_file2}}</b></a></td>
                        </tr>
                        <tr>
                          <td>Extra file 3 :</td>
                          <td><a href="/media/{{personnel.extra_file3}}"><b>{{personnel.extra_file3}}</b></a></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <!-- /.box-body -->
          </div>
          <div class="tab-pane" id="cv">

              <div class="box-body">
                {{ object.cv|safe }}
              </div>


          </div>
          {%else%}
          <div class="tab-pane active" id="cv">

              <div class="box-body">
                {{ object.cv|safe }}
              </div>


          </div>
          {%endif%}

          <!-- /.tab-pane -->
        </div>
        <!-- /.tab-content -->
      </div>
      <!-- /.nav-tabs-custom -->
    </div>
    <!-- /.col -->
  </div>
  <!-- /.row -->
{% endblock %}
