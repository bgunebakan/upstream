{% extends 'cruds/base.html' %}
{% load i18n %}
{% load crud_tags %}
{% load portunes_tags %}
{% load render_table from django_tables2 %}
{% load static %}
{% block title %}Portunes Access Control{% endblock %}

{% block page_name %}Portunes Access Control{% endblock %}
{% block page_description %}Details{% endblock %}

{% block bodyclass %}skin-purple {%if config.hide_sidebar %}sidebar-collapse{%endif%} {% endblock %}

{% block page_stylesheets %}
<!-- ChartJS 1.0.1 -->
<script src="{% static 'plugins/chartjs/Chart.min.js' %}"></script>
{% endblock %}

{% block breadcrumbs %}
<ol class="breadcrumb">
    <li><a href="/portunes/"><i class="fa fa-dashboard"></i> Dashboard</a></li>
    <li class="active">Controller</li>
</ol>
{% endblock %}

{% block content %}
  <div class="row">
    <div class="col-md-3">
      <!-- Profile Image -->
      <div class="box box-primary">
        <div class="box-body box-profile">
          <img class="profile-user-img img-responsive img-circle" src="https://assets.ubuntu.com/v1/0fdf9cfe-picto-server-darkaubergine.svg" alt="FotoÄŸraf">

          <h3 class="profile-username text-center">{{ object.name }}</h3>

          <ul class="list-group list-group-unbordered">
            <li class="list-group-item">
              <b>Ip</b> <a class="pull-right">{{ object.ip_address }}</a>
            </li>
            <li class="list-group-item">
              <b>Mac</b> <a class="pull-right">{{ object.mac }}</a>
            </li>
            <li class="list-group-item">
              <b>Health</b>
              {%if object.health is True %}
                <a class="pull-right">Working</a>
              {%else%}
                <a class="pull-right">Not working</a>
              {%endif%}
            </li>



          </ul>
          <div class="col-md-12 col-lg-12 " align="center">
          <a href="/portunes/controller/{{object.id}}/update" class="btn btn-primary btn-block" align="center">Update Details</a>
          <a href="/portunes/controller/permission/{{object.id}}" class="btn btn-warning btn-block" align="center">Update Permissions</a>
          <a href="/portunes/controller/startup/{{object.id}}" class="btn btn-success btn-block" align="center">Startup Config</a>
            </div>
        </div>
        <!-- /.box-body -->
      </div>
      <!-- /.box -->
    </div>
    <!-- /.col -->
    <div class="col-md-9">
      <!-- About Me Box -->
        <div class="nav-tabs-custom">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#actions" data-toggle="tab">Actions</a></li>
            <li class=""><a href="#doors" data-toggle="tab">Doors</a></li>
          </ul>

          <div class="tab-content">

              <div class="active tab-pane" id="actions">
                  <div class="box-body">
                      <div class="row">
                          {% get_table request object.id as table%}
                          {% render_table table %}
                      </div>
                  </div>
              </div>
              <div class="tab-pane" id="doors">
                  <div class="box-body">
                      <div class="row">
                          {% doors object.id as doors%}
                          <table class="table table-user-information">
                            <tbody>
                              {%for door in doors%}
                              <tr>
                                <td>{{door.entrance_controller_pin}}</td>
                                <td><b><a href="/portunes/door/{{door.id}}">{{door.name}}</a></b></td>
                              </tr>
                              {%endfor%}

                            </tbody>
                          </table>

                      </div>
                  </div>
              </div>
          </div>
        <!-- /.box-body -->
      </div>
      <!-- /.box -->
    </div>
    <!-- /.col -->
  </div>
  <!-- /.row -->
{% endblock %}
