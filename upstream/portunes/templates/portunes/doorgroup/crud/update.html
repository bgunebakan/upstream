{% extends 'cruds/base.html' %}
{% load i18n %}
{% load crispy_forms_tags %}
{% load render_table from django_tables2 %}
{% load crud_tags %}
{% load static %}
{% load portunes_tags %}
{% block title %}Portunes Access Control{% endblock %}

{% block page_name %}Portunes Access Control{% endblock %}
{% block page_description %}Door Group Update{% endblock %}

{% block bodyclass %}skin-purple {%if config.hide_sidebar %}sidebar-collapse{%endif%} {% endblock %}

{% block content %}

<!-- Content Header (Page header) -->
<section class="content-header">
  <h1>
    <a href="/portunes/doorgroup/{{object.id}}/update">{{object}} </a> Door Group
  </h1>
</section>

<!-- Main content -->
<section class="content">
  <div class="row">
    <div class="col-xs-12">
      <div class="box">
        <div class="box-header">
          {%get_group_doors object.id as group_doors%}
          <form action="" method="post" name="form" id="doorgroup_form" novalidate="">
            {% csrf_token %}
            <label class="required" for="id_name">Name:</label>
            <input name="name" value="{{object}}" id="id_name" required="" class="vTextField" maxlength="30" type="text">
        </div>
        <!-- /.box-header -->
        <div class="box-body">
          <label for="AllCheckbox">All</label>
          <input type="checkbox" ID="AllCheckbox" />
          <label for="NoneCheckbox">None</label>
          <input type="checkbox" ID="NoneCheckbox" />

          <table class="table table-bordered text-center">
          <tbody>
          {%get_all_controllers as controllers%}
          {% for controller in controllers.all %}
            {% cycle '<tr>' '' '' %}
                <td>
          <ul>
            <a href="/controllers/detail/{{controller.mac}}">
              <i class="fa fa-archive"></i> <span>{{ controller.name}}</span>
            </a><br>
             {%get_all_doors as doors%}
             {% for door in doors.all %}

              {%if door.entrance.name == controller.name %}
              <li class="fa fa-code-fork" > {{door.entrance_controller_pin}} - {{door.name}}
                <input type="checkbox" class="checkbox" name="doors" value="{{door.id}}"
                id="id_doors"
                {%for permission in group_doors %}
                  {%if permission == door %}
                  checked
                  {%endif%}
                {%endfor%}
                >
              </li><br>
              {%endif%}
              {% endfor %}
                </td>
            {% cycle '' '' '</tr>' %}
          </ul>
          {% endfor %}
        </tbody></table>
          <div class="box-footer">
            <button type="submit" name="savepermission" value="savepermission" class="btn btn-primary">Submit</button>
            <a href="/portunes/doorgroup/list" type="submit" name="cancel" value="cancel" class="btn btn-warning">Cancel</a>
          </div>
          </form>
        </div>
        <!-- /.box-body -->
      </div>
      <!-- /.box -->

    </div>
    <!-- /.col -->
  </div>
  <!-- /.row -->
</section>
<!-- /.content -->



{% block javascript %}
<script>
$(document).ready(function () {
    $('#AllCheckbox').click(function () {
        $('#NoneCheckbox').prop('checked',false);
        $('.checkbox').prop('checked', "checked");
    });

    $('#NoneCheckbox').click(function () {
        $('#AllCheckbox').prop('checked',false);
        $('.checkbox').prop('checked',false);
    });

    $('.checkbox').click(function () {
       // alert('Type checkbox was clicked');
        $('#AllCheckbox').prop('checked',false);
        $('#NoneCheckbox').prop('checked',false);
    });
});
</script>
{% endblock %}
{% endblock %}
